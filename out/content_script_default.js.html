<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: content/script/default.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: content/script/default.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>$(function() {
    /**
    * Event listener for form validation
    * @function
    * @memberof ClientSide
    * @return {void}
    */
    function validateForm() {
        var form = $(this);
        var valid = true;
        var errors = [];

        $(this).find("input").each(function() {
            if($(this).data("required") == "yes") {
                $(this).css("outline", "0");
            }

            if($(this).data("required") == "yes" &amp;&amp; $(this).val() == "") {
                valid = false;
                errors.push($(this).attr("name"));
                $(this).css("outline", "1px solid #F00");
            }

            var match = $(this).data("matchto");
            if(match) {
                if($(form).find("input[name="+match+"]").val() != $(this).val()) {
                    valid = false;
                    errors.push($(this).attr("name"));
                    $(this).css("outline", "1px solid #F00");
                }
            }
        });

        if(!valid) {
            console.log("invalid input. Missing:", errors);
            $(".js-register-error").show().html("Registrering feilet, vennligst sjekk input");
            return false;
        }

        return true;
    }

    $("form.validate, .js-register-form").on("submit", validateForm);

    $(".js-user-search").on("keypress", function(e) {
        if(e.key == "Enter") {
            console.log("Enter pressed");

            var search_form = $("&lt;form>").attr({
                action: "search",
                method: "post"
            }).append($("&lt;input>").attr({
                type:"hidden",
                name:"keyword",
                value:$(this).val()
            }));

            $("body").append(search_form);
            search_form.trigger("submit");

            //$(this).val("");
        }
    });

    $(".js-file-upload").on("change", function() {
        var filelist = $(this).prop("files");

        var filereader = new FileReader();
        filereader.onload = function() {
            $(".js-profile-image-preview").attr("src", this.result);
        }
        filereader.readAsDataURL(filelist[0]);

    });

    $(".js-profile-form").on("submit", function() {
        console.log($(this).serialize());
        var profile_image = $(this).find(".js-file-upload");
        var filelist = profile_image.prop("files");
        var valid_mime = ["image/png", "image/jpg", "image/jpeg"];
        var valid = true;
        var errors = [];



        if(filelist.length > 0) {
            var file = filelist[0];

            if(valid_mime.indexOf(file.type) &lt; 0) {
                valid = false;
                errors.push("Filformatet st√∏ttes ikke");
            }
        }

        if(!valid) {
            $(".alert").html(errors.join(",")).show();
        }

        return valid;
    });
});


function queryParams() {
    var p = location.search.split("?")[1];
    var d = {};

    if(typeof p != "undefined") {
        var split = p.split("&amp;");

        for(var i in split) {
            var psplit = split[i].split("=");
            d[psplit[0]] = psplit[1];
        }
    }

    return d;
}

function getCookie(key) {
    var cookies = document.cookie.split("; ");

    for(var i in cookies) {
        var split = cookies[i].split("=");
        if(split[0] == key) {
            return split[1];
        }
    }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ChatMessage.html">ChatMessage</a></li><li><a href="ClientSide.Chat.html">Chat</a></li><li><a href="ClientSide.ChatHandle.html">ChatHandle</a></li><li><a href="ClientSide.ChatMessage.html">ChatMessage</a></li><li><a href="Handle.html">Handle</a></li></ul><h3>Namespaces</h3><ul><li><a href="ClientSide.html">ClientSide</a></li><li><a href="Static.html">Static</a></li></ul><h3>Global</h3><ul><li><a href="global.html#sessions">sessions</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Apr 12 2018 14:29:37 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
